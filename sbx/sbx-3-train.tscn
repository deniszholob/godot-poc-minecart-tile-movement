[gd_scene load_steps=20 format=3 uid="uid://7f7wbih3geqw"]

[ext_resource type="Script" path="res://components/game-window-controller.component.gd" id="1_oe3x7"]
[ext_resource type="PackedScene" uid="uid://b4fjcsvexg1jl" path="res://components/debug/sbx-lab.tscn" id="2_n2odp"]
[ext_resource type="TileSet" uid="uid://bharj5o7bmhwc" path="res://assets/kenney-dungeon-rail_wang-fence-inside-corners_TileSet.tres" id="3_dxjyv"]
[ext_resource type="Script" path="res://components/debug/tile-map-debug.component.gd" id="4_hyf04"]
[ext_resource type="PackedScene" uid="uid://dccjas1dbwg5e" path="res://scenes/mine-cart/tile-select.tscn" id="5_ru7gq"]
[ext_resource type="Script" path="res://sbx/scripts/wagon.gd" id="6_114b6"]
[ext_resource type="Texture2D" uid="uid://dit0v1dnd4e8s" path="res://assets/mine-cart.png" id="7_2ufif"]
[ext_resource type="Script" path="res://sbx/scripts/WagonControllerComponent.gd" id="8_yodio"]
[ext_resource type="Script" path="res://components/movement/mine-cart-controller.component.gd" id="9_plb8x"]
[ext_resource type="Script" path="res://components/input/input-device-direction.component.gd" id="10_3tcww"]
[ext_resource type="Script" path="res://components/movement/move-character-sprite-animation-rotation.component.gd" id="11_befna"]
[ext_resource type="Texture2D" uid="uid://bo6n4ohfi618o" path="res://icon.svg" id="12_jmaf0"]

[sub_resource type="Gradient" id="Gradient_fy1yf"]
interpolation_mode = 2
interpolation_color_space = 1
offsets = PackedFloat32Array(0, 0.137615, 0.672783)
colors = PackedColorArray(1, 1, 1, 1, 0.5, 0.5, 0.5, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_n8u6w"]
gradient = SubResource("Gradient_fy1yf")
fill_from = Vector2(0, 1)
fill_to = Vector2(0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_akb43"]
gradient = SubResource("Gradient_fy1yf")
fill_to = Vector2(0, 1)

[sub_resource type="Gradient" id="Gradient_po7sx"]
offsets = PackedFloat32Array(0, 0.262997, 0.64526)
colors = PackedColorArray(1, 1, 1, 1, 0.470076, 0.470076, 0.470076, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_wl34t"]
gradient = SubResource("Gradient_po7sx")
fill = 1
fill_from = Vector2(0.495726, 0.495726)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rn0df"]
size = Vector2(10, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6cify"]
size = Vector2(12, 12)

[node name="SBX2" type="Node2D"]
script = ExtResource("1_oe3x7")

[node name="SBX-LAB" parent="." instance=ExtResource("2_n2odp")]
position = Vector2(-8, 48)

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource("3_dxjyv")
format = 2
layer_0/tile_data = PackedInt32Array(131067, 1, 1, 131070, 1, 1, 65534, 1, 1, -2, 131073, 1, -65538, 1, 1, -131067, 65537, 1, -65531, 1, 1, 5, 65537, 2, 131077, 65537, 0, 196613, 196609, 1, 262137, 1, 1, 327673, 1, 1, 393209, 1, 1, 458745, 65537, 2, 458746, 131073, 3, 458747, 131073, 3, 458748, 131073, 3, 458749, 131073, 3, 458750, 131073, 3, 458751, 131073, 3, 393216, 131073, 2, 393217, 131073, 3, 393218, 131073, 2, 393219, 131073, 3, 393220, 131073, 3, 393221, 196609, 2, 327685, 1, 1, 196610, 131073, 1, 196611, 131073, 3, 196612, 131073, 3, 327682, 1, 1, 262146, 1, 1, 131074, 1, 1, 196609, 131073, 3, 196608, 65537, 2, 131072, 1, 1, 65536, 65537, 0, 65537, 131073, 3, 65538, 196609, 0, 196603, 196609, 1, 262139, 1, 1, 327675, 65537, 2, 327676, 131073, 3, 327677, 131073, 3, 327678, 196609, 2, 262142, 1, 1, 196606, 1, 1, 262149, 1, 1, -131074, 65537, 0, -131073, 131073, 3, -196608, 131073, 3, -196607, 131073, 3, -196606, 131073, 3, -196605, 131073, 3, -196604, 131073, 3, -196603, 196609, 0, -1, 131073, 3, -65536, 196609, 3, -3, 131073, 3, -4, 65537, 3, 393204, 1, 1, 327668, 1, 1, 262132, 1, 1, 196596, 1, 1, 131060, 1, 1, 65524, 65537, 0, 131082, 1, 1, 196618, 1, 1, 262154, 196609, 1, 327690, 1, 1, 393226, 1, 1, 458762, 1, 1, 65528, 131073, 3, 10, 196609, 0, 9, 131073, 2, 8, 131073, 3, 7, 131073, 0, 6, 131073, 3, 65546, 1, 1, 524276, 1, 1, 458740, 1, 1, 65543, 1, 1, 65529, 131073, 3, 65530, 131073, 3, 65531, 196609, 0, 196602, 131073, 3, 196601, 65537, 0, -65527, 1, 1, -196601, 65537, 0, -131066, 131073, 3, 65526, 131073, 0, -196600, 131073, 3, -196599, 196609, 0, 131079, 196609, 2, 131078, 131073, 3, -131063, 1, 1, -131065, 196609, 2, 589812, 65537, 2, 589813, 131073, 3, 589814, 131073, 3, 589815, 131073, 2, 589816, 131073, 3, 589817, 131073, 3, 589818, 131073, 3, 589819, 131073, 3, 589820, 131073, 3, 589821, 131073, 3, 589822, 131073, 3, 589823, 131073, 3, 524288, 131073, 3, 524289, 131073, 3, 524290, 131073, 3, 524291, 131073, 3, 524292, 131073, 3, 524293, 131073, 3, 524294, 131073, 3, 524295, 131073, 2, 524296, 131073, 3, 524297, 131073, 3, 524298, 196609, 2, 524279, 1, 1, 262153, 131073, 3, 262152, 65537, 3, 458759, 1, 1, 327680, 1, 0, 393223, 1, 0, 65527, 131073, 3, 65525, 131073, 3, 131062, 1, 1, 196598, 65537, 2, 196599, 196609, 0, 262135, 1, 1, 327671, 196609, 2, 327670, 65537, 0, 393206, 1, 1, 458742, 65537, 2, 458743, 196609, 0)

[node name="TileMapDebugComponent" type="Node" parent="TileMap" node_paths=PackedStringArray("tile_map")]
script = ExtResource("4_hyf04")
tile_map = NodePath("..")

[node name="TileSelect" parent="." instance=ExtResource("5_ru7gq")]
position = Vector2(-8, -8)

[node name="Wagon" type="CharacterBody2D" parent="."]
script = ExtResource("6_114b6")

[node name="Sprite2D" type="Sprite2D" parent="Wagon"]
modulate = Color(1, 0.643137, 0.501961, 1)
position = Vector2(-24, 40)
texture = ExtResource("7_2ufif")
hframes = 2
vframes = 2

[node name="WagonControllerComponent" type="Node" parent="Wagon" node_paths=PackedStringArray("actor")]
script = ExtResource("8_yodio")
actor = NodePath("..")

[node name="Locomotive" type="CharacterBody2D" parent="."]
position = Vector2(-24, 24)
motion_mode = 1
script = ExtResource("6_114b6")

[node name="Sprite2D" type="Sprite2D" parent="Locomotive"]
texture = ExtResource("7_2ufif")
hframes = 2
vframes = 2

[node name="FaceDirectionRay" type="RayCast2D" parent="Locomotive"]
visible = false
target_position = Vector2(0, -16)
collision_mask = 0
collide_with_bodies = false

[node name="IntendedDirectionRay" type="RayCast2D" parent="Locomotive"]
visible = false
modulate = Color(0.831373, 0.164706, 0, 1)
target_position = Vector2(0, -16)
collision_mask = 0
collide_with_bodies = false

[node name="LocomotiveControllerComponent" type="Node" parent="Locomotive" node_paths=PackedStringArray("input_device_direction", "move_character_sprite_animation_rotation_component")]
script = ExtResource("9_plb8x")
input_device_direction = NodePath("../InputDeviceDirectionComponent")
move_character_sprite_animation_rotation_component = NodePath("../MoveCharacterSpriteAnimationRotationComponent")

[node name="InputDeviceDirectionComponent" type="Node" parent="Locomotive"]
script = ExtResource("10_3tcww")

[node name="MoveCharacterSpriteAnimationRotationComponent" type="Node" parent="Locomotive" node_paths=PackedStringArray("sprite", "pivot")]
script = ExtResource("11_befna")
sprite = NodePath("../Sprite2D")
frame_start_direction = 2
pivot = NodePath("../Pivot")

[node name="Pivot" type="Node2D" parent="Locomotive"]
visible = false

[node name="PointLight2D" type="PointLight2D" parent="Locomotive/Pivot"]
position = Vector2(-0.480142, -40.8401)
scale = Vector2(0.234996, 1.03625)
color = Color(1, 0.819608, 0.54902, 1)
energy = 1.5
texture = SubResource("GradientTexture2D_n8u6w")

[node name="PointLight2D2" type="PointLight2D" parent="Locomotive/Pivot"]
position = Vector2(0, 19)
scale = Vector2(0.135412, 0.355167)
color = Color(1, 0, 0, 1)
texture = SubResource("GradientTexture2D_akb43")

[node name="PointLight2D3" type="PointLight2D" parent="Locomotive/Pivot"]
color = Color(1, 0.819608, 0.54902, 1)
texture = SubResource("GradientTexture2D_wl34t")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Locomotive"]
shape = SubResource("RectangleShape2D_rn0df")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
visible = false
follow_viewport_enabled = true

[node name="Label" type="Label" parent="CanvasLayer"]
offset_left = -192.0
offset_top = -56.0
offset_right = 17.0
offset_bottom = -7.0
scale = Vector2(0.500293, 0.500293)
text = "W/S = Throttle/Brake
A/D = Turn on T/X junctions
ESC = Quit
F11 = Toggle Fullscreen"

[node name="Label2" type="Label" parent="CanvasLayer"]
offset_left = -192.0
offset_top = 144.0
offset_right = 17.0
offset_bottom = 193.0
scale = Vector2(0.500293, 0.500293)
text = "MineCart TileSet Demo"

[node name="CanvasModulate" type="CanvasModulate" parent="."]
visible = false
color = Color(0.129412, 0.207843, 0.27451, 1)

[node name="StaticBody2D" type="StaticBody2D" parent="."]
visible = false
position = Vector2(-24, -8)

[node name="Sprite2D" type="Sprite2D" parent="StaticBody2D"]
scale = Vector2(0.1, 0.1)
texture = ExtResource("12_jmaf0")

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
shape = SubResource("RectangleShape2D_6cify")
